{% extends 'BlogBundle::base.html.twig' %}
{% block head %}
    <h1>Category list</h1>
{% endblock %}
{% block content %}
    <div class="row">
        {% for category in categories %}
            <div class="col-md-3">
                <div class="item">
                    <h2><a href="{{ path('category_show', {'id':category.id}) }}">{{ category.title|title }}</a></h2>
                    <p class="small">{{ category.createAt|date('d-m-Y H:i:s') }}</p>
                    <p class="small">{{ category.updateAt|date('d-m-Y H:i:s') }}</p>
                    {% if category.parent %}
                        <p>Parent: <a href="{{ path('category_show',{'id':category.parent.id}) }}"
                                      class="small">{{ category.parent|title }}</a></p>

                    {% endif %}
                    {% if category.children|length > 0 %}
                        <p>Children:
                            {% spaceless %}
                                {% for child in category.children %}
                                    <a
                                    href="{{ path('category_show', {'id':child.id}) }}">{{ child.title|title }}</a>{% if not loop.last %}
                                    <span>, </span>{% endif %}
                                {% endfor %}
                            {% endspaceless %}
                        </p>
                    {% endif %}
                    <p>
                        <a href="{{ path('category_edit', {'id':category.id}) }}">Edit</a>
                        <a href="{{ path('category_delete', {'id':category.id}) }}">Delete</a>
                    </p>
                </div>
            </div>
        {% endfor %}
        <div class="col-md-12">
            <a class="btn btn-success" href="{{ path('category_new') }}">Create a new entry</a>
        </div>
    </div>
{% endblock %}
